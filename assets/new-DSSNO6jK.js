import{A as g,B as h,f as i,r as v,M as k,J as B,C as m,D as o,H as r,c as n,I as c,O as S}from"./index-DTK_tHht.js";import{g as _,h as U,i as P,k as T}from"./VCard-DPvwWsL5.js";import{V as y}from"./VTextField-9QhEHpo5.js";import{V as N}from"./VSwitch-B4gMum-j.js";import{a as W}from"./VInput-C1tsdchc.js";const q={key:0},F=g({__name:"new",setup(A){const t=h(),w=i(()=>t.currentWallet),x=i(()=>t.webauthnSupported),u=v(""),d=v(""),s=v(!1),V=[a=>!!a||"Password is required",a=>a&&a.length>=8||"Password must be at least 8 characters"],f=[a=>!!a||"Username is required"],p=i(()=>f.every(a=>a(u.value)===!0)),b=i(()=>V.every(a=>a(d.value)===!0));async function C(a){if(!p.value){console.log("Username is not valid");return}let e;if(a)if(b.value)e=await t.createWallet(u.value,d.value),t.currentWallet=e;else{console.log("Password is not valid");return}else e=await t.createWallet(u.value),t.currentWallet=e}return(a,e)=>(r(),k("div",null,[w.value?(r(),k("h2",q,"You are using the wallet "+B(w.value),1)):(r(),m(_,{key:1,elevation:"0"},{default:o(()=>[n(U,null,{default:o(()=>[c("You do not have a wallet. Create one here")]),_:1}),n(P,null,{default:o(()=>[n(y,{type:"text",label:"wallet name",autocomplete:s.value?"webauthn":"username",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),rules:f},null,8,["autocomplete","modelValue"]),n(N,{label:"Biometric wallet",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),disabled:!x.value},null,8,["modelValue","disabled"]),s.value?S("",!0):(r(),m(y,{key:0,dense:"",type:"password",label:"password",autocomplete:s.value?"webauthn":"new-password",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value=l),rules:V},null,8,["autocomplete","modelValue"]))]),_:1}),n(T,null,{default:o(()=>[s.value?(r(),m(W,{key:1,onClick:e[4]||(e[4]=l=>C(!1)),disabled:!p.value},{default:o(()=>[c("Create biometric Wallet")]),_:1},8,["disabled"])):(r(),m(W,{key:0,onClick:e[3]||(e[3]=l=>C(!0)),disabled:!p.value||!b.value},{default:o(()=>[c("Create Wallet with Password")]),_:1},8,["disabled"]))]),_:1})]),_:1}))]))}});export{F as default};
