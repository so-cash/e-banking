import{_ as I,a as L,b as M,c as T}from"./WalletPassword.vue_vue_type_script_setup_true_lang-CP4aYXH9.js";import{A,B as j,f as g,w as N,I as r,N as k,c as t,F as a,y as W,M as i,J as f,K as _,O as o,D as p,P as x,E as $,_ as U,r as h,o as D,V as E,G as F,H as G,L as O}from"./index-CjOFXEkW.js";import{t as H}from"./formatting-CrmIf10V.js";import{V as B,a as S}from"./VSelect-omC-gu8C.js";import{V as C}from"./VSpacer-oWN8IlRE.js";import{a as R}from"./VInput-CZnSWQNW.js";import{V as J}from"./VAlert-BGu6s0xv.js";import{a as K}from"./VChip-Bl0RUETQ.js";import{V as Y}from"./VContainer-B4WSKeZT.js";import{g as q,h as Q,i as X}from"./VCard-B3Oprnt7.js";import"./VTextField-BeZf-9lP.js";/* empty css              */const Z=i("h4",null,"Select a wallet to use",-1),ee=["src"],te={key:0},ae={class:"d-flex"},le={class:"text-caption mx-2"},se={key:0},oe={class:"d-flex"},ne=i("span",null,"You have not created a wallet yet!",-1),re=A({__name:"SelectWallet",setup(z){const e=j(),v=g(()=>$().map(s=>s.info)),u=g(()=>e.wallets),m=g(()=>e.selectedProvider);N(m,async s=>{console.log("Selected provider",s==null?void 0:s.name),s&&await e.loadWallets(!0)});function w(){window.open(U.join("/e-banking","/wallets/new"),"_blank")}return(s,c)=>(r(),k("div",null,[Z,t(S,{items:o(v),"return-object":"","item-title":"name",modelValue:o(e).selectedProvider,"onUpdate:modelValue":c[0]||(c[0]=l=>o(e).selectedProvider=l)},{item:a(({item:l,props:V})=>[t(B,W(V,{title:""}),{default:a(()=>[i("div",null,[i("img",{src:l.raw.icon,alt:"p.info.rdns",height:"16px"},null,8,ee),f(" "+_(l.raw.name),1)])]),_:2},1040)]),_:1},8,["items","modelValue"]),o(e).selectedProvider?(r(),k("div",te,[o(u).length>0?(r(),p(S,{key:0,items:o(u),"item-value":"address","item-title":"address","hide-no-data":"",modelValue:o(e).currentWallet,"onUpdate:modelValue":c[1]||(c[1]=l=>o(e).currentWallet=l)},{item:a(({item:l,props:V})=>[t(B,W(V,{title:""}),{default:a(()=>[i("div",ae,[f(_(l.raw.attributes.name)+" ",1),i("span",le,_(l.raw.address),1),t(C),l.raw.balance!==void 0?(r(),k("span",se,_(o(H)(l.raw.balance,0))+" GWei",1)):x("",!0)])]),_:2},1040)]),_:1},8,["items","modelValue"])):(r(),p(J,{key:1,type:"info",variant:"outlined",dense:""},{default:a(()=>[i("div",oe,[ne,t(C),t(R,{size:"x-small",onClick:w},{default:a(()=>[f("try now...")]),_:1})])]),_:1}))])):x("",!0)]))}}),ie=i("img",{src:L,height:"70%"},null,-1),ce={class:"text-caption mx-1"},ke=A({__name:"payment",setup(z){const e=j(),v=g(()=>e.currentWallet),u=h(0),m=h(0);h(!1),F();const w=h(null),s=async(d,n,b,P,y)=>(y?m.value--:m.value++,!0),c=g(()=>e.currentWallet&&e.selectedProvider);N(()=>e.currentWallet,async d=>{const n=e.dltApi();n&&d&&(n.setProcessingCallback(s),u.value=await n.walletBalance(d),console.log("wallet balance",u.value))});async function l(){const d=$();d.length==1&&(e.selectedProvider=d[0].info);const n=e.dltApi();n&&(n.setProcessingCallback(s),v.value&&(u.value=await n.walletBalance(v.value)),w.value&&(e.walletPasswordComponent=w.value))}function V(){e.selectedProvider=void 0,e.currentWallet=void 0}return D(async()=>{await l()}),(d,n)=>{const b=M,P=G("RouterView"),y=T;return r(),p(E,null,{default:a(()=>[t(I,{ref_key:"walletPassword",ref:w},null,512),t(K,{"model-value":m.value>0,class:"align-center justify-center",persistent:""},{default:a(()=>[t(b,{"model-value":m.value>0},null,8,["model-value"])]),_:1},8,["model-value"]),t(O,null,{default:a(()=>[t(Y,{fluid:"","ma-0":"","pa-0":"","fill-height":"",class:"v-col-md-7 v-col-lg-5 justify-center align-center"},{default:a(()=>[t(q,{class:"mb-3"},{default:a(()=>[t(Q,{class:"d-flex justify-center"},{default:a(()=>[ie]),_:1}),c.value?(r(),p(X,{key:0,class:"row d-flex"},{default:a(()=>[f(" Using "),i("span",ce,_(v.value),1),f(" on "+_(o(e).selectedProvider.name)+" ",1),t(C),t(R,{outlined:"",size:"x-small",onClick:V},{default:a(()=>[f("change")]),_:1})]),_:1})):x("",!0)]),_:1}),c.value?(r(),p(P,{key:0})):(r(),p(re,{key:1}))]),_:1})]),_:1}),t(y)]),_:1})}}});export{ke as default};
