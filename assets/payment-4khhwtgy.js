import{_ as I,V as L,a as M,b as T,c as U}from"./VContainer-jmM1OoKQ.js";import{A,B as j,f as g,w as N,I as r,N as k,c as t,E as a,y as W,M as i,J as f,K as _,O as o,D as p,P as x,F as $,Q as D,r as h,o as E,V as F,G,H as O,L as H}from"./index-DCXAqaCA.js";import{t as J}from"./formatting-B24v2g9C.js";import{V as B,a as S}from"./VSelect-Sgunq8j5.js";import{V as C}from"./VSpacer-CKZWWHes.js";import{a as R}from"./VInput-DPxD_2KL.js";import{V as K}from"./VAlert-BfNMbkJr.js";import{a as Q}from"./VChip-nXHyrkOq.js";import{g as Y,h as q,i as X}from"./VCard-Cmd1jmLt.js";import"./VTextField-BMl2SHdI.js";const Z=i("h4",null,"Select a wallet to use",-1),ee=["src"],te={key:0},ae={class:"d-flex"},le={class:"text-caption mx-2"},se={key:0},oe={class:"d-flex"},ne=i("span",null,"You have not created a wallet yet!",-1),re=A({__name:"SelectWallet",setup(z){const e=j(),v=g(()=>$().map(s=>s.info)),u=g(()=>e.wallets),m=g(()=>e.selectedProvider);N(m,async s=>{console.log("Selected provider",s==null?void 0:s.name),s&&await e.loadWallets(!0)});function w(){window.open(D.join("/e-banking","/wallets/new"),"_blank")}return(s,c)=>(r(),k("div",null,[Z,t(S,{items:o(v),"return-object":"","item-title":"name",modelValue:o(e).selectedProvider,"onUpdate:modelValue":c[0]||(c[0]=l=>o(e).selectedProvider=l)},{item:a(({item:l,props:V})=>[t(B,W(V,{title:""}),{default:a(()=>[i("div",null,[i("img",{src:l.raw.icon,alt:"p.info.rdns",height:"16px"},null,8,ee),f(" "+_(l.raw.name),1)])]),_:2},1040)]),_:1},8,["items","modelValue"]),o(e).selectedProvider?(r(),k("div",te,[o(u).length>0?(r(),p(S,{key:0,items:o(u),"item-value":"address","item-title":"address","hide-no-data":"",modelValue:o(e).currentWallet,"onUpdate:modelValue":c[1]||(c[1]=l=>o(e).currentWallet=l)},{item:a(({item:l,props:V})=>[t(B,W(V,{title:""}),{default:a(()=>[i("div",ae,[f(_(l.raw.attributes.name)+" ",1),i("span",le,_(l.raw.address),1),t(C),l.raw.balance!==void 0?(r(),k("span",se,_(o(J)(l.raw.balance,0))+" GWei",1)):x("",!0)])]),_:2},1040)]),_:1},8,["items","modelValue"])):(r(),p(K,{key:1,type:"info",variant:"outlined",dense:""},{default:a(()=>[i("div",oe,[ne,t(C),t(R,{size:"x-small",onClick:w},{default:a(()=>[f("try now...")]),_:1})])]),_:1}))])):x("",!0)]))}}),ie=i("img",{src:M,height:"70%"},null,-1),ce={class:"text-caption mx-1"},he=A({__name:"payment",setup(z){const e=j(),v=g(()=>e.currentWallet),u=h(0),m=h(0);h(!1),G();const w=h(null),s=async(d,n,b,P,y)=>(y?m.value--:m.value++,!0),c=g(()=>e.currentWallet&&e.selectedProvider);N(()=>e.currentWallet,async d=>{const n=e.dltApi();n&&d&&(n.setProcessingCallback(s),u.value=await n.walletBalance(d),console.log("wallet balance",u.value))});async function l(){const d=$();d.length==1&&(e.selectedProvider=d[0].info);const n=e.dltApi();n&&(n.setProcessingCallback(s),v.value&&(u.value=await n.walletBalance(v.value)),w.value&&(e.walletPasswordComponent=w.value))}function V(){e.selectedProvider=void 0,e.currentWallet=void 0}return E(async()=>{await l()}),(d,n)=>{const b=T,P=O("RouterView"),y=U;return r(),p(F,null,{default:a(()=>[t(I,{ref_key:"walletPassword",ref:w},null,512),t(Q,{"model-value":m.value>0,class:"align-center justify-center",persistent:""},{default:a(()=>[t(b,{"model-value":m.value>0},null,8,["model-value"])]),_:1},8,["model-value"]),t(H,null,{default:a(()=>[t(L,{fluid:"","ma-0":"","pa-0":"","fill-height":"",class:"v-col-md-7 v-col-lg-5 justify-center align-center"},{default:a(()=>[t(Y,{class:"mb-3"},{default:a(()=>[t(q,{class:"d-flex justify-center"},{default:a(()=>[ie]),_:1}),c.value?(r(),p(X,{key:0,class:"row d-flex"},{default:a(()=>[f(" Using "),i("span",ce,_(v.value),1),f(" on "+_(o(e).selectedProvider.name)+" ",1),t(C),t(R,{outlined:"",size:"x-small",onClick:V},{default:a(()=>[f("change")]),_:1})]),_:1})):x("",!0)]),_:1}),c.value?(r(),p(P,{key:0})):(r(),p(re,{key:1}))]),_:1})]),_:1}),t(y)]),_:1})}}});export{he as default};
