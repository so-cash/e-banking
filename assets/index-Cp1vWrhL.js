import{_ as S,V as L}from"./account-header.vue_vue_type_script_setup_true_lang-DcIYGIFl.js";import{A as O,f as i,r as m,o as P,N as v,c as l,D as E,E as a,R as F,I as r,J as d,K as c,O as u,y as R,M as b,P as A,C as j}from"./index-0qfAGCCK.js";import{u as I}from"./accounts-xqcus0on.js";import{s as J,a as K,b as Y,c as $,t as g}from"./formatting-C2HTBpvJ.js";import{g as h,i as k}from"./VCard-s2pA5268.js";import{V as q,a as z}from"./VHover-SpHKfE8U.js";import{a as G}from"./VInput-B8MLwSA0.js";import"./VSelect-CTKlDjjE.js";import"./VTextField-w6AVECsj.js";import"./VChip-C46BPr1e.js";import"./VSelectionControl-f0gyQlMm.js";import"./VListItem-CB7_-Uaj.js";const H={key:1,class:"d-flex justify-center"},Q={key:0},U={class:"text-caption"},W={key:0,class:"text-caption"},ue=O({__name:"index",setup(X){const s=I(),x=i(()=>j().params.address.toString()),V=i(()=>s.selectedAccount),n=i(()=>{var t;return(t=s.selectedAccount)==null?void 0:t.account}),D=i(()=>{var t;return((t=s.selectedAccount)==null?void 0:t.transactions)||[]}),B=i(()=>{var t;return(t=n.value)==null?void 0:t.bank.currency}),o=m(),T=m(0),C=m(0),f=m(!1);async function y(){if(n.value){f.value=!0;try{const t=o.value,M=o.value?C.value:n.value.balance;o.value=o.value?new Date(J(o.value.getTime())):new Date(K(Date.now()));const p=await s.loadTransactions(n.value,{from:o.value,to:t},s.selectedAccount.transactions);s.selectedAccount.transactions||(s.selectedAccount.transactions=[]),s.selectedAccount.transactions=p}finally{f.value=!1}}}P(async()=>{s.selectedAccount={account:await s.loadAccount(x.value)},T.value=n.value.balance,y()});const w=i(()=>[{title:"Date",value:"date",align:"start"},{title:"Label",value:"label",align:"start"},{title:"Credit",value:"credit",align:"end"},{title:"Debit",value:"debit",align:"end"},{title:"Balance "+B.value,value:"balance",align:"end"}]);return(t,M)=>{const p=S;return r(),v(F,null,[l(p,{selected:V.value},null,8,["selected"]),n.value?(r(),v("div",H,[l(h,{elevation:"3",class:"mt-3 flex-lg-0-0 flex-sm-fill"},{default:a(()=>[l(k,null,{default:a(()=>[l(q,{items:D.value,headers:w.value,hover:"","items-per-page":-1},{"item.date":a(({item:e})=>[d(c(u(Y)(e.date.getTime()))+" "+c(u($)(e.date.getTime())),1)]),"item.label":a(({item:e})=>[l(z,{"open-delay":1e3},{default:a(({isHovering:_,props:N})=>[l(h,R(N,{class:_?"bg-grey-lighten-2":"",elevation:_?2:0}),{default:a(()=>[l(k,{class:"pa-2"},{default:a(()=>[b("div",null,c(e.details.details),1),b("div",null,c(e.details.recipient.iban??e.details.recipient.bic),1),_?(r(),v("div",Q,[b("div",U,c(e.cpty),1),e.details.reason?(r(),v("div",W,c(e.details.reason),1)):A("",!0)])):A("",!0)]),_:2},1024)]),_:2},1040,["class","elevation"])]),_:2},1024)]),"item.credit":a(({item:e})=>[d(c(e.credit>0?u(g)(e.credit,n.value.bank.decimals):"."),1)]),"item.debit":a(({item:e})=>[d(c(e.debit>0?u(g)(e.debit,n.value.bank.decimals):"."),1)]),"item.balance":a(({item:e})=>[d(c(u(g)(e.balanceAfter,n.value.bank.decimals)),1)]),bottom:a(()=>[l(G,{onClick:y,loading:f.value},{default:a(()=>[d("Load more")]),_:1},8,["loading"])]),_:1},8,["items","headers"])]),_:1})]),_:1})])):(r(),E(L,{key:0,elevation:3,type:"card"}))],64)}}});export{ue as default};
