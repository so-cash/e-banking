import{k as A,V as F,U as L,e as x,A as g,B as T,C as U,n as i,M as s,F as f,r as B,aY as p,l as _,w as a,Y as D,o,X as b,i as r,v as u,x as m,q as d}from"./index-DSVT_0pq.js";import{j as v,g as M,h as w,i as Y}from"./VCard-DEPspglP.js";import{V as $}from"./VSwitch-Dhv1Zs9O.js";import{b as W}from"./VInput-BS2eDNCp.js";function j(h,e=0){return Intl.NumberFormat(void 0,{style:"decimal",minimumFractionDigits:e}).format(h)}const q={key:0,class:"v-row"},E=["src"],G={key:1,class:"v-row"},I={class:"text-caption"},R=d("h3",null,"Create a new wallet",-1),O=A({__name:"index",setup(h){F();const e=L(),V=D(),y=x(()=>e.wallets),C=g({}),N=x(()=>e.selectedProvider);g([]);function P(){e.currentWallet=void 0,V.push("/wallets/new")}T(N,async l=>{console.log("Selected provider",l.name),l&&(await e.loadWallets(),await k())});async function k(){const l=e.dltApi();if(l)for(const c of y.value)C.value[c.address]=await l.walletBalance(c.address)}function S(l){e.currentWallet=l,e.dltApi()}return U(async()=>{await e.loadWallets(),await k()}),(l,c)=>(o(),i(f,null,[s(b)().length!=1||!s(e).selectedProvider?(o(),i("div",q,[(o(!0),i(f,null,B(s(b)(),t=>{var n;return o(),_(v,{key:t.info.uuid,class:"mt-2 ml-2",elevation:"3",onClick:X=>s(e).selectedProvider=t.info,color:((n=s(e).selectedProvider)==null?void 0:n.uuid)==t.info.uuid?"primary":void 0},{default:a(()=>[r(M,null,{default:a(()=>[u(m(t.info.name),1)]),_:2},1024),r(w,{class:"d-flex"},{default:a(()=>[d("img",{src:t.info.icon,alt:"p.info.rdns",height:"42px",class:"mx-auto"},null,8,E)]),_:2},1024)]),_:2},1032,["onClick","color"])}),128))])):p("",!0),s(e).selectedProvider?(o(),i("div",G,[(o(!0),i(f,null,B(y.value,t=>(o(),_(v,{key:t.address,class:"mt-2 ml-2",elevation:"3"},{default:a(()=>[r(w,null,{default:a(()=>[d("h3",null,[u(m(t.attributes.name)+" ",1),d("span",I,m(t.address),1)]),d("p",null,"Balance: "+m(s(j)(C.value[t.address]))+" GWei",1),r($,{modelValue:t.attributes.passwordLess,"onUpdate:modelValue":n=>t.attributes.passwordLess=n,label:"Biometric wallet",color:"primary",readonly:""},null,8,["modelValue","onUpdate:modelValue"]),r(W,{color:"primary",onClick:n=>S(t.address),disabled:s(e).currentWallet===t.address},{default:a(()=>[u("Select")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024))),128)),s(e).selectedProvider.supportNew?(o(),_(v,{key:0,class:"mt-2 ml-2",elevation:"3"},{default:a(()=>[r(w,null,{default:a(()=>[R]),_:1}),r(Y,null,{default:a(()=>[r(W,{color:"primary",onClick:P},{default:a(()=>[u("New")]),_:1})]),_:1})]),_:1})):p("",!0)])):p("",!0)],64))}});export{O as default};
