import{a as I,b as L,_ as M,c as T}from"./WalletPassword.vue_vue_type_script_setup_true_lang-qukNgvsX.js";import{A,B as j,e as g,C as N,w as R,N as x,J as i,c as t,O as C,P as r,F as l,y as h,H as _,I as p,E as f,_ as U,M as d,r as y,o as E,V as F,K as G,L as O,G as D}from"./index-B05TX0qr.js";import{t as H}from"./formatting-CrmIf10V.js";import{V as B,a as S}from"./VSelect-CP0eIwJb.js";import{V as b}from"./VSpacer-B7qUOijd.js";import{V as J}from"./VAlert-WIeHVAKn.js";import{a as $}from"./VInput-Di4Kitpn.js";import{a as K}from"./VChip-DSOwNYSK.js";import{V as Y}from"./VContainer-cSfa4uMh.js";import{g as q,h as Q,i as X}from"./VCard-BkxKWA3b.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTextField-D1q_Oj4g.js";const Z=["src"],ee={key:0},te={class:"d-flex"},ae={class:"text-caption mx-2"},le={key:0},se={class:"d-flex"},oe=A({__name:"SelectWallet",setup(z){const e=j(),v=g(()=>N().map(n=>n.info)),u=g(()=>e.wallets),m=g(()=>e.selectedProvider);R(m,async n=>{console.log("Selected provider",n==null?void 0:n.name),n&&await e.loadWallets(!0)});function w(){window.open(U.join("/e-banking","/wallets/new"),"_blank")}return(n,s)=>(d(),x("div",null,[s[4]||(s[4]=i("h4",null,"Select a wallet to use",-1)),t(B,{items:r(v),"return-object":"","item-title":"name",modelValue:r(e).selectedProvider,"onUpdate:modelValue":s[0]||(s[0]=o=>r(e).selectedProvider=o)},{item:l(({item:o,props:V})=>[t(S,h(V,{title:""}),{default:l(()=>[i("div",null,[i("img",{src:o.raw.icon,alt:"p.info.rdns",height:"16px"},null,8,Z),_(" "+p(o.raw.name),1)])]),_:2},1040)]),_:1},8,["items","modelValue"]),r(e).selectedProvider?(d(),x("div",ee,[r(u).length>0?(d(),f(B,{key:0,items:r(u),"item-value":"address","item-title":"address","hide-no-data":"",modelValue:r(e).currentWallet,"onUpdate:modelValue":s[1]||(s[1]=o=>r(e).currentWallet=o)},{item:l(({item:o,props:V})=>[t(S,h(V,{title:""}),{default:l(()=>[i("div",te,[_(p(o.raw.attributes.name)+" ",1),i("span",ae,p(o.raw.address),1),t(b),o.raw.balance!==void 0?(d(),x("span",le,p(r(H)(o.raw.balance,0))+" GWei",1)):C("",!0)])]),_:2},1040)]),_:1},8,["items","modelValue"])):(d(),f(J,{key:1,type:"info",variant:"outlined",dense:""},{default:l(()=>[i("div",se,[s[3]||(s[3]=i("span",null,"You have not created a wallet yet!",-1)),t(b),t($,{size:"x-small",onClick:w},{default:l(()=>s[2]||(s[2]=[_("try now...")])),_:1})])]),_:1}))])):C("",!0)]))}}),ne={class:"text-caption mx-1"},ge=A({__name:"payment",setup(z){const e=j(),v=g(()=>e.currentWallet),u=y(0),m=y(0);y(!1),D();const w=y(null),n=async(c,a,P,W,k)=>(k?m.value--:m.value++,!0),s=g(()=>e.currentWallet&&e.selectedProvider);R(()=>e.currentWallet,async c=>{const a=e.dltApi();a&&c&&(a.setProcessingCallback(n),u.value=await a.walletBalance(c),console.log("wallet balance",u.value))});async function o(){const c=N();c.length==1&&(e.selectedProvider=c[0].info);const a=e.dltApi();a&&(a.setProcessingCallback(n),v.value&&(u.value=await a.walletBalance(v.value)),w.value&&(e.walletPasswordComponent=w.value))}function V(){e.selectedProvider=void 0,e.currentWallet=void 0}return E(async()=>{await o()}),(c,a)=>{const P=L,W=G("RouterView"),k=T;return d(),f(F,null,{default:l(()=>[t(I,{ref_key:"walletPassword",ref:w},null,512),t(K,{"model-value":m.value>0,class:"align-center justify-center",persistent:""},{default:l(()=>[t(P,{"model-value":m.value>0},null,8,["model-value"])]),_:1},8,["model-value"]),t(O,null,{default:l(()=>[t(Y,{fluid:"","ma-0":"","pa-0":"","fill-height":"",class:"v-col-md-7 v-col-lg-5 justify-center align-center"},{default:l(()=>[t(q,{class:"mb-3"},{default:l(()=>[t(Q,{class:"d-flex justify-center"},{default:l(()=>a[0]||(a[0]=[i("img",{src:M,height:"70%"},null,-1)])),_:1}),s.value?(d(),f(X,{key:0,class:"row d-flex"},{default:l(()=>[a[2]||(a[2]=_(" Using ")),i("span",ne,p(v.value),1),_(" on "+p(r(e).selectedProvider.name)+" ",1),t(b),t($,{outlined:"",size:"x-small",onClick:V},{default:l(()=>a[1]||(a[1]=[_("change")])),_:1})]),_:1})):C("",!0)]),_:1}),s.value?(d(),f(W,{key:0})):(d(),f(oe,{key:1}))]),_:1})]),_:1}),t(k)]),_:1})}}});export{ge as default};
