import{_ as I,V as L,a as M,b as T,c as U}from"./VContainer-DWECXwI-.js";import{A as B,B as S,f as V,w as A,H as i,M as k,c as a,D as l,y as P,L as u,I as w,J as m,N as n,C as v,O as h,E as N,r as g,o as z,V as D,F as E,G as F,K as G}from"./index-BM4827qe.js";import{t as O}from"./formatting-B24v2g9C.js";import{V as W,a as b}from"./VSelect-DGFgWUf-.js";import{V as $}from"./VSpacer-Dj1D5w-H.js";import{a as H}from"./VChip-BRNZ0QEs.js";import{g as J,h as K,i as q}from"./VCard-DO0BZtUi.js";import{a as Q}from"./VInput-Itdv4raA.js";import"./VTextField-CFevf7Dy.js";const X=u("h4",null,"Select a wallet to use",-1),Y=["src"],Z={class:"d-flex"},ee={class:"text-caption mx-2"},te={key:0},ae=B({__name:"SelectWallet",setup(j){const e=S(),p=V(()=>N().map(s=>s.info)),_=V(()=>e.wallets),d=V(()=>e.selectedProvider);return A(d,async s=>{console.log("Selected provider",s==null?void 0:s.name),s&&await e.loadWallets(!0)}),(s,r)=>(i(),k("div",null,[X,a(b,{items:n(p),"return-object":"","item-title":"name",modelValue:n(e).selectedProvider,"onUpdate:modelValue":r[0]||(r[0]=t=>n(e).selectedProvider=t)},{item:l(({item:t,props:f})=>[a(W,P(f,{title:""}),{default:l(()=>[u("div",null,[u("img",{src:t.raw.icon,alt:"p.info.rdns",height:"16px"},null,8,Y),w(" "+m(t.raw.name),1)])]),_:2},1040)]),_:1},8,["items","modelValue"]),n(e).selectedProvider?(i(),v(b,{key:0,items:n(_),"item-value":"address","item-title":"address",modelValue:n(e).currentWallet,"onUpdate:modelValue":r[1]||(r[1]=t=>n(e).currentWallet=t)},{item:l(({item:t,props:f})=>[a(W,P(f,{title:""}),{default:l(()=>[u("div",Z,[w(m(t.raw.attributes.name)+" ",1),u("span",ee,m(t.raw.address),1),a($),t.raw.balance!==void 0?(i(),k("span",te,m(n(O)(t.raw.balance,0))+" GWei",1)):h("",!0)])]),_:2},1040)]),_:1},8,["items","modelValue"])):h("",!0)]))}}),le=u("img",{src:M,height:"70%"},null,-1),se={class:"text-caption mx-1"},_e=B({__name:"payment",setup(j){const e=S(),p=V(()=>e.currentWallet),_=g(0),d=g(0);g(!1),E();const s=g(null),r=async(c,o,x,C,y)=>(y?d.value--:d.value++,!0),t=V(()=>e.currentWallet&&e.selectedProvider);A(()=>e.currentWallet,async c=>{const o=e.dltApi();o&&c&&(o.setProcessingCallback(r),_.value=await o.walletBalance(c),console.log("wallet balance",_.value))});async function f(){const c=N();c.length==1&&(e.selectedProvider=c[0].info);const o=e.dltApi();o&&(o.setProcessingCallback(r),p.value&&(_.value=await o.walletBalance(p.value)),s.value&&(e.walletPasswordComponent=s.value))}function R(){e.selectedProvider=void 0,e.currentWallet=void 0}return z(async()=>{await f()}),(c,o)=>{const x=T,C=F("RouterView"),y=U;return i(),v(D,null,{default:l(()=>[a(I,{ref_key:"walletPassword",ref:s},null,512),a(H,{"model-value":d.value>0,class:"align-center justify-center",persistent:""},{default:l(()=>[a(x,{"model-value":d.value>0},null,8,["model-value"])]),_:1},8,["model-value"]),a(G,null,{default:l(()=>[a(L,{fluid:"","ma-0":"","pa-0":"","fill-height":"",class:"v-col-md-7 v-col-lg-5 v-col-xl-4 justify-center align-center"},{default:l(()=>[a(J,{class:"mb-3"},{default:l(()=>[a(K,{class:"d-flex justify-center"},{default:l(()=>[le]),_:1}),t.value?(i(),v(q,{key:0,class:"row d-flex"},{default:l(()=>[w(" Using "),u("span",se,m(p.value),1),w(" on "+m(n(e).selectedProvider.name)+" ",1),a($),a(Q,{outlined:"",size:"x-small",onClick:R},{default:l(()=>[w("change")]),_:1})]),_:1})):h("",!0)]),_:1}),t.value?(i(),v(C,{key:0})):(i(),v(ae,{key:1}))]),_:1})]),_:1}),a(y)]),_:1})}}});export{_e as default};
