import{_ as k,V as C}from"./account-header.vue_vue_type_script_setup_true_lang-CidRi4RV.js";import{A as x,f as d,r as f,w as B,o as N,N as p,c as t,D as g,E as n,R as h,G as I,H as S,I as i,J as v,K as m,P as E,C as T}from"./index-BqGG3amX.js";import{u as L}from"./accounts-WnJbYwxL.js";import{g as R,i as D,k as F}from"./VCard-ybFokeQM.js";import{V as _}from"./VTextField-BIdU23Ve.js";import{V as H,a as U,b as W}from"./VListItem-Bnkcoier.js";import{a as $}from"./VInput-X0VGhynT.js";import"./formatting-C2HTBpvJ.js";const j={key:1,class:"d-flex justify-center"},G={key:0},Y=x({__name:"transfer",setup(J){const s=L();d(()=>T().params.address.toString());const V=d(()=>s.selectedAccount),r=d(()=>{var e;return(e=s.selectedAccount)==null?void 0:e.account});d(()=>{var e;return((e=s.selectedAccount)==null?void 0:e.transactions)||[]});const u=f(),c=f(""),o=f(),A=I();async function w(){if(!r.value)throw new Error("Account not found");if(u.value<=0)throw new Error("Need a positive amount to transfer");if(!c.value)throw new Error("Account not found");await s.transfer(r.value,c.value,u.value),A.push(`/accounts/${r.value.address}`)}return B(c,async e=>{if(e){if(e.startsWith("FR")){const a=await s.decodeIBAN(r.value,e);console.log("decoded IBAN",a),o.value=a}else if(e.startsWith("0x")){const a=await s.loadAccount(e);console.log("decoded account",a),o.value=a}}}),N(async()=>{}),(e,a)=>{const y=k,b=S("v-list-item-content");return i(),p(h,null,[t(y,{selected:V.value},null,8,["selected"]),r.value?(i(),p("div",j,[t(R,{elevation:"3",class:"mt-3 w-100 w-md-50 w-lg-33"},{default:n(()=>[t(D,null,{default:n(()=>[t(_,{type:"number",modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value=l),label:"transfer amount"},null,8,["modelValue"]),t(_,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=l=>c.value=l),label:"transfer to (address or IBAN)"},null,8,["modelValue"])]),_:1}),o.value?(i(),p("div",G,[t(H,null,{default:n(()=>[t(b,null,{default:n(()=>[t(U,null,{default:n(()=>[v("Beneficiary "+m(o.value.iban),1)]),_:1}),t(W,null,{default:n(()=>{var l;return[v(m(o.value.name)+". "+m((l=o.value.bank.info)==null?void 0:l.name)+". "+m(o.value.bank.bic),1)]}),_:1})]),_:1})]),_:1})])):E("",!0),t(F,null,{default:n(()=>[t($,{color:"primary",onClick:w,disabled:!o.value},{default:n(()=>[v("Transfer")]),_:1},8,["disabled"])]),_:1})]),_:1})])):(i(),g(C,{key:0,elevation:3,type:"card"}))],64)}}});export{Y as default};
