import{_ as S,V as L}from"./account-header.vue_vue_type_script_setup_true_lang-CidRi4RV.js";import{A as O,f as i,r as m,o as P,N as v,c,D as E,E as a,R as F,I as r,J as d,K as l,O as u,y as R,M as b,P as h,C as j}from"./index-BqGG3amX.js";import{u as I}from"./accounts-WnJbYwxL.js";import{s as J,a as K,b as Y,c as $,t as g}from"./formatting-C2HTBpvJ.js";import{g as k,i as x}from"./VCard-ybFokeQM.js";import{V as q,a as z}from"./VHover-DQu3a3DF.js";import{a as G}from"./VInput-X0VGhynT.js";import"./VSelect-BKCtqjVT.js";import"./VTextField-BIdU23Ve.js";import"./VChip-D6ZBbgZ_.js";import"./VSelectionControl-Tx7MFcOq.js";import"./VListItem-Bnkcoier.js";const H={key:1,class:"d-flex justify-center"},Q={key:0},U={class:"text-caption"},W={key:0,class:"text-caption"},ue=O({__name:"index",setup(X){const s=I(),V=i(()=>j().params.address.toString()),y=i(()=>s.selectedAccount),n=i(()=>{var t;return(t=s.selectedAccount)==null?void 0:t.account}),D=i(()=>{var t;return((t=s.selectedAccount)==null?void 0:t.transactions)||[]}),B=i(()=>{var t;return(t=n.value)==null?void 0:t.bank.currency}),o=m(),T=m(0),C=m(0),f=m(!1);async function A(){if(n.value){f.value=!0;try{const t=o.value,M=o.value?C.value:n.value.balance;o.value=o.value?new Date(J(o.value.getTime())):new Date(K(Date.now()));const p=await s.loadTransactions(n.value,{from:o.value,to:t},s.selectedAccount.transactions);s.selectedAccount.transactions||(s.selectedAccount.transactions=[]),s.selectedAccount.transactions=p}finally{f.value=!1}}}P(async()=>{y.value||(s.selectedAccount={account:await s.loadAccount(V.value)}),T.value=n.value.balance,A()});const w=i(()=>[{title:"Date",value:"date",align:"start"},{title:"Label",value:"label",align:"start"},{title:"Credit",value:"credit",align:"end"},{title:"Debit",value:"debit",align:"end"},{title:"Balance "+B.value,value:"balance",align:"end"}]);return(t,M)=>{const p=S;return r(),v(F,null,[c(p,{selected:y.value},null,8,["selected"]),n.value?(r(),v("div",H,[c(k,{elevation:"3",class:"mt-3 flex-lg-0-0 flex-sm-fill"},{default:a(()=>[c(x,null,{default:a(()=>[c(q,{items:D.value,headers:w.value,hover:"","items-per-page":-1},{"item.date":a(({item:e})=>[d(l(u(Y)(e.date.getTime()))+" "+l(u($)(e.date.getTime())),1)]),"item.label":a(({item:e})=>[c(z,{"open-delay":1e3},{default:a(({isHovering:_,props:N})=>[c(k,R(N,{class:_?"bg-grey-lighten-2":"",elevation:_?2:0}),{default:a(()=>[c(x,{class:"pa-2"},{default:a(()=>[b("div",null,l(e.details.details),1),b("div",null,l(e.details.recipient.iban??e.details.recipient.bic),1),_?(r(),v("div",Q,[b("div",U,l(e.cpty),1),e.details.reason?(r(),v("div",W,l(e.details.reason),1)):h("",!0)])):h("",!0)]),_:2},1024)]),_:2},1040,["class","elevation"])]),_:2},1024)]),"item.credit":a(({item:e})=>[d(l(e.credit>0?u(g)(e.credit,n.value.bank.decimals):"."),1)]),"item.debit":a(({item:e})=>[d(l(e.debit>0?u(g)(e.debit,n.value.bank.decimals):"."),1)]),"item.balance":a(({item:e})=>[d(l(u(g)(e.balanceAfter,n.value.bank.decimals)),1)]),bottom:a(()=>[c(G,{onClick:A,loading:f.value},{default:a(()=>[d("Load more")]),_:1},8,["loading"])]),_:1},8,["items","headers"])]),_:1})]),_:1})])):(r(),E(L,{key:0,elevation:3,type:"card"}))],64)}}});export{ue as default};
